--- origsrc/eog-2.30.2/data/eog.pc.in	2009-08-11 05:49:55.000000000 -0500
+++ src/eog-2.30.2/data/eog.pc.in	2010-06-25 04:37:12.737663200 -0500
@@ -9,3 +9,4 @@ Description: The GNOME Image Viewer
 Requires: gtk+-2.0, gconf-2.0
 Version: @VERSION@
 Cflags: -I${includedir}
+Libs: -L${libdir} -leog
--- origsrc/eog-2.30.2/doc/reference/Makefile.am	2010-06-21 15:26:03.000000000 -0500
+++ src/eog-2.30.2/doc/reference/Makefile.am	2010-06-25 04:37:12.741663400 -0500
@@ -93,19 +93,12 @@ INCLUDES= \
 	-I$(top_srcdir)/cut-n-paste/totem-screensaver		\
 	$(EOG_CFLAGS)
 
-if ENABLE_JPEG
-jpeg_LIB = $(top_builddir)/jpegutils/libeog-jpegutils.la
-endif
-
 GTKDOC_LIBS=\
 	$(top_builddir)/src/libeog.la 	\
-	$(top_builddir)/cut-n-paste/toolbar-editor/libtoolbareditor.la \
-	$(top_builddir)/cut-n-paste/totem-screensaver/libtotemscrsaver.la \
 	$(BINDING_LIBS)			\
 	$(LIBJPEG)			\
 	$(X_LIBS)			\
 	$(EOG_LIBS)			\
-	$(jpeg_LIB)			\
 	$(MORE_GTKDOC_LIBS)
 
 # This includes the standard gtk-doc make rules, copied by gtkdocize.
--- origsrc/eog-2.30.2/plugins/Makefile.am	2010-05-13 16:24:19.000000000 -0500
+++ src/eog-2.30.2/plugins/Makefile.am	2010-06-25 04:37:12.745663700 -0500
@@ -8,7 +8,7 @@ INCLUDES = \
 	$(WARN_CFLAGS)					\
 	-DEOG_LOCALEDIR=\""$(prefix)/$(DATADIRNAME)/locale"\"
 
-AM_LDFLAGS = -avoid-version -module
+AM_LDFLAGS = -avoid-version -module -no-undefined
 
 plugins_LTLIBRARIES = \
 	fullscreen/libfullscreen.la  \
@@ -23,14 +23,14 @@ fullscreen_libfullscreen_la_SOURCES = \
 	fullscreen/eog-fullscreen-plugin.h  \
 	fullscreen/eog-fullscreen-plugin.c
 
-fullscreen_libfullscreen_la_LIBADD = $(EOG_LIBS)
+fullscreen_libfullscreen_la_LIBADD = $(top_builddir)/src/libeog.la $(EOG_LIBS)
 
 # Reload plugin
 reload_libreload_la_SOURCES = \
 	reload/eog-reload-plugin.h  \
 	reload/eog-reload-plugin.c
 
-reload_libreload_la_LIBADD = $(EOG_LIBS)
+reload_libreload_la_LIBADD = $(top_builddir)/src/libeog.la $(EOG_LIBS)
 
 # Statusbar Date Plugin
 if HAVE_EXIF
@@ -40,7 +40,7 @@ statusbar_date_libstatusbar_date_la_SOUR
 	statusbar-date/eog-statusbar-date-plugin.h  \
 	statusbar-date/eog-statusbar-date-plugin.c
 
-statusbar_date_libstatusbar_date_la_LIBADD = $(EOG_LIBS)
+statusbar_date_libstatusbar_date_la_LIBADD = $(top_builddir)/src/libeog.la $(EOG_LIBS)
 plugins_in_files += statusbar-date/statusbar-date.eog-plugin.desktop.in
 endif
 
--- origsrc/eog-2.30.2/src/Makefile.am	2010-06-18 15:26:23.000000000 -0500
+++ src/eog-2.30.2/src/Makefile.am	2010-06-25 04:37:12.749663900 -0500
@@ -6,7 +6,7 @@ toolbar_LIB = $(top_builddir)/cut-n-past
 
 screensaver_LIB = $(top_builddir)/cut-n-paste/totem-screensaver/libtotemscrsaver.la
 
-noinst_LTLIBRARIES = libeog.la
+lib_LTLIBRARIES = libeog.la
 
 bin_PROGRAMS = eog
 
@@ -137,9 +137,9 @@ if HAVE_EXEMPI
 if !HAVE_EXIF
 INST_H_FILES +=				\
 	eog-exif-details.h
-endif !HAVE_EXIF
 libeog_la_SOURCES +=			\
 	eog-exif-details.c
+endif !HAVE_EXIF
 endif HAVE_EXEMPI
 
 libeog_la_CFLAGS =						\
@@ -156,6 +156,10 @@ libeog_la_CFLAGS =						\
 	-DEOG_PLUGIN_DIR=\""$(libdir)/eog/plugins"\"
 
 libeog_la_LIBADD = \
+	$(toolbar_LIB)			\
+	$(screensaver_LIB)		\
+	$(jpeg_LIB)			\
+	$(LIBJPEG)			\
 	$(EOG_LIBS)
 
 if HAVE_LCMS
@@ -191,10 +195,7 @@ eog_CFLAGS = 							\
 eog_LDADD = 				\
 	libeog.la			\
 	$(EOG_LIBS)			\
-	$(LIBJPEG)			\
-	$(toolbar_LIB)			\
-	$(screensaver_LIB)		\
-	$(jpeg_LIB)
+	$(X_LIBS)
 
 eog_LDFLAGS = -export-dynamic -no-undefined -export-symbols-regex "^[[^_]].*"
 
