--- origsrc/eog-2.22.3/data/eog.pc.in	2008-03-10 09:04:09.000000000 -0500
+++ src/eog-2.22.3/data/eog.pc.in	2008-07-09 04:03:51.640625000 -0500
@@ -9,3 +9,4 @@
 Requires: gtk+-2.0, libgnomeui-2.0 libglade-2.0, gnome-vfs-2.0, gconf-2.0
 Version: @VERSION@
 Cflags: -I${includedir}
+Libs: -L${libdir} -leog
--- origsrc/eog-2.22.3/jpegutils/Makefile.am	2008-03-10 09:04:21.000000000 -0500
+++ src/eog-2.22.3/jpegutils/Makefile.am	2008-07-09 04:03:51.656250000 -0500
@@ -1,9 +1,9 @@
 INCLUDES = $(EOG_CFLAGS) \
 	$(EXIF_CFLAGS)
 
-noinst_LIBRARIES = libeog-jpegutils.a
+noinst_LTLIBRARIES = libeog-jpegutils.la
 
-libeog_jpegutils_a_SOURCES =		\
+libeog_jpegutils_la_SOURCES =		\
 	transupp.c			\
 	transupp.h
 
--- origsrc/eog-2.22.3/jpegutils/transupp.c	2008-03-10 09:04:21.000000000 -0500
+++ src/eog-2.22.3/jpegutils/transupp.c	2008-07-09 04:03:51.890625000 -0500
@@ -51,6 +51,11 @@
 #define MAX(a, b)  (((a) > (b)) ? (a) : (b))
 #endif
 
+#ifdef __CYGWIN__
+#define height_in_blocks height_in_data_units
+#define width_in_blocks width_in_data_units
+#endif
+
 enum {
   JERR_CONVERSION_NOTIMPL
 };
--- origsrc/eog-2.22.3/src/Makefile.am	2008-03-10 09:04:00.000000000 -0500
+++ src/eog-2.22.3/src/Makefile.am	2008-07-09 04:03:51.921875000 -0500
@@ -1,15 +1,12 @@
 if ENABLE_JPEG
-jpeg_LIB = -L$(top_builddir)/jpegutils -leog-jpegutils
-jpeg_DEPS = $(top_builddir)/jpegutils/libeog-jpegutils.a
+jpeg_LIB = $(top_builddir)/jpegutils/libeog-jpegutils.la
 endif
 
-toolbar_LIB = -L$(top_builddir)/cut-n-paste/toolbar-editor -ltoolbareditor
-toolbar_DEPS = $(top_builddir)/cut-n-paste/toolbar-editor/libtoolbareditor.la
+toolbar_LIB = $(top_builddir)/cut-n-paste/toolbar-editor/libtoolbareditor.la
 
-screensaver_LIB = -L$(top_builddir)/cut-n-paste/totem-screensaver -ltotemscrsaver
-screensaver_DEPS = $(top_builddir)/cut-n-paste/totem-screensaver/libtotemscrsaver.la
+screensaver_LIB = $(top_builddir)/cut-n-paste/totem-screensaver/libtotemscrsaver.la
 
-noinst_LTLIBRARIES = libeog.la
+lib_LTLIBRARIES = libeog.la
 
 bin_PROGRAMS = eog
 
@@ -128,10 +125,12 @@
 endif
 
 if HAVE_EXEMPI
+if !HAVE_EXIF
 libeog_la_SOURCES +=			\
 	eog-exif-details.h		\
 	eog-exif-details.c
 endif
+endif
 
 libeog_la_CFLAGS =						\
 	$(EOG_CFLAGS)						\
@@ -147,6 +146,10 @@
 	-DEOG_PLUGIN_DIR=\""$(libdir)/eog/plugins"\"
 
 libeog_la_LIBADD = \
+	$(LIBJPEG)			\
+	$(toolbar_LIB)			\
+	$(screensaver_LIB)		\
+	$(jpeg_LIB)			\
 	$(EOG_LIBS)
 
 if ENABLE_PYTHON
@@ -164,12 +167,6 @@
 
 eog_SOURCES = main.c
 
-eog_DEPENDENCIES = 	    \
-	libeog.la	    \
-	$(jpeg_DEPS)	    \
-	$(toolbar_DEPS)     \
-	$(screensaver_DEPS)
-
 eog_CFLAGS = 							\
 	$(EOG_CFLAGS)						\
 	-I$(top_srcdir)/cut-n-paste/toolbar-editor		\
@@ -180,11 +177,7 @@
 eog_LDADD = 				\
 	libeog.la			\
 	$(EOG_LIBS)			\
-	$(X_LIBS)			\
-	$(LIBJPEG)			\
-	$(toolbar_LIB)			\
-	$(screensaver_LIB)		\
-	$(jpeg_LIB)
+	$(X_LIBS)
 
 eog_LDFLAGS = -export-dynamic -no-undefined -export-symbols-regex "^[[^_]].*"
 
